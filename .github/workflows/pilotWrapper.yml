name: pilot wrapper

on: [push, pull_request]

jobs:
  PilotWrapper:
    runs-on: ubuntu-latest

    strategy:
      fail-fast: False
      matrix:
        python:
          - 2.7.13
          - 3.6.8

    steps:
    - uses: actions/checkout@v1
    - name: prepare environment
      run: conda create -n python_${{ matrix.python }} python=${{ matrix.python }}
    - name: run pilot wrapper test
      run: |
        cp tests/Integration/WorkloadManagementSystem/Test_GenerateAndExecutePilotWrapper.py .
        python Test_GenerateAndExecutePilotWrapper.py file://${{ github.workspace }}/WorkloadManagementSystem/Utilities/PilotWrapper.py file://${{ github.workspace }}/Core/scripts/dirac-install.py
